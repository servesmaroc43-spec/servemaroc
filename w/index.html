<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account | SERVEMAROC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f0f4f8; }
        .neo-card { background: white; border: 3px solid #000; border-radius: 45px; overflow: hidden; box-shadow: 10px 10px 0px rgba(0,0,0,0.1); }
        .yellow-header { background: #ffea00; height: 140px; border-bottom: 3px solid #000; display: flex; justify-content: center; align-items: flex-end; }
        .avatar-frame { width: 115px; height: 115px; background: #fff; border: 4px solid #000; border-radius: 30px; margin-bottom: -55px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .neo-input { border: 3px solid #000; border-radius: 22px; padding: 16px; width: 100%; background: #fff; font-weight: 800; outline: none; transition: 0.3s; }
        .neo-input:focus { background: #fefce8; border-color: #4f70ff; }
        .neo-tag { background: #ffea00; border: 2px solid #000; border-radius: 10px; padding: 3px 15px; font-size: 11px; font-weight: 900; position: absolute; top: -14px; right: 25px; z-index: 5; }
        .neo-button { background: #ffea00; border: 3px solid #000; border-radius: 25px; padding: 18px; width: 100%; font-weight: 900; font-size: 18px; box-shadow: 7px 7px 0px #000; cursor: pointer; transition: 0.2s; }
        .neo-button:active { transform: translate(4px, 4px); box-shadow: 2px 2px 0px #000; }
        .gender-switcher { background: #000; color: #fff; border-radius: 50px; padding: 8px 30px; display: inline-flex; gap: 20px; font-size: 14px; font-weight: 900; cursor: pointer; border: 2px solid #000; }
    </style>
</head>
<body class="p-4 md:p-12">

    <header class="max-w-xl mx-auto flex justify-between items-center mb-10 bg-white p-5 rounded-[40px] border-2 border-black shadow-sm">
        <div class="w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center text-white font-black text-2xl border-2 border-black">S</div>
        <div class="flex items-center gap-4">
            <div class="text-right">
                <p id="nav-user-display" class="text-sm font-black italic text-black tracking-tight">Loading...</p>
                <p class="text-[10px] text-green-500 font-bold uppercase">Online Now</p>
            </div>
            <div class="w-12 h-12 bg-slate-100 rounded-2xl overflow-hidden border-2 border-black shadow-md">
                <img id="nav-avatar-img" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Jude" class="w-full h-full">
            </div>
        </div>
    </header>

    <div class="max-w-xl mx-auto neo-card">
        <div class="yellow-header">
            <div class="avatar-frame">
                <img id="main-profile-img" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Jude" class="w-full h-full bg-slate-50">
            </div>
        </div>

        <div class="p-10 mt-16 text-center">
            <div class="gender-switcher mb-10" onclick="toggleUserGender()">
                <span id="m-btn">♂ ذكر</span> | <span id="f-btn" class="opacity-30">♀ أنثى</span>
            </div>

            <div class="relative mb-8 text-right">
                <span class="neo-tag">اسم المستخدم</span>
                <div id="account-name-display" class="neo-input bg-slate-50">--</div>
            </div>

            <div class="relative mb-12 text-right">
                <span class="neo-tag" style="background: white;">رتبة الحساب</span>
                <div class="neo-input italic text-slate-400">Premium Member</div>
            </div>

            <div class="border-4 border-black rounded-[45px] p-8 bg-slate-50 shadow-[12px_12px_0px_rgba(0,0,0,1)]">
                <div class="bg-black text-white py-3 rounded-2xl text-[12px] font-black mb-10 italic tracking-widest uppercase">Change Secure Password</div>
                <div class="space-y-6">
                    <div class="text-right"><input type="password" placeholder="كلمة السر الحالية" class="neo-input text-sm"></div>
                    <div class="text-right"><input type="password" placeholder="كلمة السر الجديدة" class="neo-input text-sm"></div>
                    <div class="text-right"><input type="password" placeholder="تأكيد كلمة السر" class="neo-input text-sm"></div>
                    <button class="neo-button mt-6">تحديث البيانات الآن</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isMale = true;

        window.onload = function() {
            const sessionData = JSON.parse(localStorage.getItem("userSession"));
            if (sessionData) {
                // ذكاء اصطناعي بسيط: إذا لم يوجد اسم، نأخذ الجزء الأول من الإيميل وننظفه
                let rawName = sessionData.username || sessionData.email.split('@')[0];
                let cleanName = rawName.charAt(0).toUpperCase() + rawName.slice(1);
                
                document.getElementById("nav-user-display").innerText = cleanName;
                document.getElementById("account-name-display").innerText = cleanName;
            } else {
                window.location.href = "../index.html";
            }
        };

        function toggleUserGender() {
            isMale = !isMale;
            document.getElementById("m-btn").style.opacity = isMale ? "1" : "0.3";
            document.getElementById("f-btn").style.opacity = isMale ? "0.3" : "1";
            
            // اختيار شخصيات (Seeds) ملامحها "زوينة" و "طبيعية" جداً
            // Jude: دري وسيم بملامح هادئة | Bella: بنت جميلة بملامح طبيعية
            const personSeed = isMale ? "Jude" : "Bella";
            const avatarUrl = `https://api.dicebear.com/7.x/avataaars/svg?seed=${personSeed}&mouth=smile&eyebrows=default`;
            
            document.getElementById("main-profile-img").src = avatarUrl;
            document.getElementById("nav-avatar-img").src = avatarUrl;
        }
    </script>
</body>
</html>
